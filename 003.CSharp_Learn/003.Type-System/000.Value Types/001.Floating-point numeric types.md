# Floating-point numeric types(浮点数值类型)

## What`s the Floating-point numeric types
The floating-point numeric types represent real numbers. All floating-point numeric types are value types. They are also simple types and can be initialized with literals. All floating-point numeric types support arithmetic, comparison, and equality operators.(浮点数类型表示实数。所有浮点数值类型都是值类型。它们也是简单类型，可以用字面量初始化。所有浮点数值类型都支持算术、比较和相等操作符。)

### Characteristics of the floating-point types
C# 支持如下的预定义浮点类型

| C# type/keyword | Approximate range                | Precision(精度) | Size     | .NET type      |
|-----------------|----------------------------------|-----------------|----------|----------------|
| float           | ±1.5 x 10^−45 to ±3.4 x 10^38    | ~6-9 digits     | 4 bytes  | System.Single  |
| double          | ±5.0 × 10^−324 to ±1.7 × 10^308  | ~15-17 digits   | 8 bytes  | System.Double  |
| decimal         | ±1.0 x 10^-28 to ±7.9228 x 10^28 | 28-29 digits    | 16 bytes | System.Decimal |

In the preceding table, each C# type keyword from the leftmost column is an alias for the corresponding .NET type.  They are interchangeable.  For example, the following declarations declare variables of the same type:(在上表中，最左边列的每个c# type关键字都是对应的. net类型的别名。它们是可以互换的。例如，下面的声明声明了相同类型的变量:)
```C#
   double a = 12.3;
   System.Double b = 12.3;
```

The default value of each floating-point type is zero, 0. Each of the floating-point types has the MinValue and MaxValue constants that provide the minimum and maximum finite value of that type. The float and double types also provide constants that represent not-a-number and infinity values. For example, the double type provides the following constants: Double.NaN, Double.NegativeInfinity, and Double.PositiveInfinity.（每种浮点类型的默认值都是0,0。每种浮点类型都有MinValue和MaxValue常量，分别表示该类型的最小和最大有限值。float和double类型还提供了表示非数值和无穷大值的常量。例如，double类型提供了下列常量。Double.NaN, Double.NegativeInfinity(负无穷),  Double.PositiveInfinity(正无穷)）
> 浮点类型默认值：0.0

The decimal type is appropriate when the required degree of precision is determined by the number of digits to the right of the decimal point.  Such numbers are commonly used in financial applications, for currency amounts (for example, $1.00), interest rates (for example, 2.625%), and so forth.  Even numbers that are precise to only one decimal digit are handled more accurately by the decimal type: 0.1, for example, can be exactly represented by a decimal instance, while there's no double or float instance that exactly represents 0.1.  Because of this difference in numeric types, unexpected rounding errors can occur in arithmetic calculations when you use double or float for decimal data.  You can use double instead of decimal when optimizing performance is more important than ensuring accuracy.  However, any difference in performance would go unnoticed by all but the most calculation-intensive applications.  Another possible reason to avoid decimal is to minimize storage requirements.  For example, ML.NET uses float because the difference between 4 bytes and 16 bytes adds up for very large data sets.  For more information, see System.Decimal.（如果所需的精度由小数点右侧的位数确定，则适合使用decimal类型。这些数字在金融应用程序中常用来表示货币金额(例如，$1.00)、利率(例如，2.625%)等。decimal类型可以更精确地处理只能表示一个小数的偶数:例如，0.1可以用decimal实例精确表示，而double或float实例则不能精确表示0.1。由于数值类型的差异，在使用double或float表示十进制数据时，在算术计算中可能会发生意外的舍入错误。当优化性能比确保精度更重要时，可以使用double而不是decimal。然而，除了计算密集的应用程序之外，所有应用程序都不会注意到性能上的差异。避免使用decimal的另一个可能原因是尽量减少存储需求。例如，ML.NET使用float是因为对于非常大的数据集来说，4字节和16字节之间的差加起来太大了。有关更多信息，请参见System.Decimal。）
> 性能重要，使用Double;精度重要，用decimal;

You can mix integral types and the float and double types in an expression. In this case, integral types are implicitly converted to one of the floating-point types and, if necessary, the float type is implicitly converted to double. The expression is evaluated as follows:（可以在表达式中混合使用整数类型、float和double类型。在这种情况下，整型会隐式转换为浮点类型，必要时还会隐式转换为double类型。该表达式的计算方式如下:）
- If there is double type in the expression, the expression evaluates to double, or to bool in relational and equality comparisons.（如果表达式中有double类型，则表达式的计算结果为double，或者在关系比较和相等比较中计算结果为bool。）
- If there is no double type in the expression, the expression evaluates to float, or to bool in relational and equality comparisons.（如果表达式中没有double类型，则表达式的计算结果为float，或者在关系比较和相等比较中计算结果为bool。）

You can also mix integral types and the decimal type in an expression. In this case, integral types are implicitly converted to the decimal type and the expression evaluates to decimal, or to bool in relational and equality comparisons.（也可以在表达式中混合使用整数类型和小数类型。在这种情况下，整数类型隐式转换为decimal类型，表达式的计算结果为decimal，或者在关系和相等性比较中计算结果为bool。）

You cannot mix the decimal type with the float and double types in an expression.  In this case, if you want to perform arithmetic, comparison, or equality operations, you must explicitly convert the operands either from or to the decimal type, as the following example shows:（在表达式中，decimal类型不能与float double类型混合使用。在这种情况下，如果要执行算数，比较 或相等运算，必须显式地将操作数都转化为decimal类型）
```C#
    double a = 1.0;
    decimal b = 2.1m;
    Console.WriteLine(a + (double)b);  // 3.1
    Console.WriteLine((decimal)a + b); // 3.1

    // Console.WriteLine(a + b); 执行报错: error CS0019: 运算符“+”无法应用于“double”和“decimal”类型的操作数
```

You can use either [standard numeric format strings](https://learn.microsoft.com/en-us/dotnet/standard/base-types/standard-numeric-format-strings) or [custom numeric format strings](https://learn.microsoft.com/en-us/dotnet/standard/base-types/custom-numeric-format-strings) to format a floating-point value.
```C#
   # 数字格式化，格式化为字符串 
   double a = 1.0;
   decimal b = 2.899m;
   Console.WriteLine(a + (double)b);  // 3.899
   Console.WriteLine(((decimal)a + b).ToString("00.00")); // 03.90
```
### Real literals
The type of a real literal is determined by its suffix as follows:（真值的类型由后缀决定）
- The literal without suffix or with the d or D suffix is of type double
- The literal with the f or F suffix is of type float
- The literal with the m or M suffix is of type decimal
  ```C#
     double d = 3D;
     d = 4d;
     d = 3.934_001;
     
     float f = 3_000.5F;
     f = 5.4f;
     
     decimal myMoney = 3_000.5m; // 使用 _ 作为数字分隔符
     myMoney = 400.75M;


     // 使用科学计数法表示字面量
     double d = 0.42e2;
     Console.WriteLine(d);  // output 42
     
     float f = 134.45E-2f;
     Console.WriteLine(f);  // output: 1.3445
     
     decimal m = 1.5E6m;
     Console.WriteLine(m);  // output: 1500000
  ```

### Conversions
There is only one implicit conversion between floating-point numeric types: from float to double. However, you can convert any floating-point type to any other floating-point type with the [explicit cast](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/type-testing-and-cast#cast-expression). For more information, see [Built-in numeric conversions](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/numeric-conversions).


## 参考资料
1. [https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/floating-point-numeric-types](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/floating-point-numeric-types)

